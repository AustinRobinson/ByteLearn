<app-header />
<div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
  <div class="sm:mx-auto sm:w-full sm:max-w-sm">
    <h2 class="mt-5 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900">Create a new account</h2>
  </div>

  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-md">
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <div class="grid grid-cols-1 gap-x-6 gap-y-6 sm:grid-cols-6">
        <!-- First Name field -->
        <div class="sm:col-span-3">
          <label for="first-name" class="block text-sm font-medium leading-6 text-gray-900">First name</label>
          <div class="mt-2">
            <input type="text" name="first-name" id="first-name" autocomplete="given-name"
              placeholder="Enter your first name" required formControlName="firstName"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm leading-6"
              [class]="{
                'focus:ring-indigo-600': !shouldShowError(firstName),
                'focus:ring-red-500': shouldShowError(firstName),
              }">
            <div *ngIf="firstName?.getError('serverError')" class="text-red-600 text-sm mt-1">
              {{ firstName?.getError('serverError') }}
            </div>
          </div>
          @if (shouldShowError(firstName) && firstName?.hasError('required')) {
          <span class="text-sm text-red-500">First name is required</span>
          }
        </div>

        <!-- Last Name field -->
        <div class="sm:col-span-3">
          <label for="last-name" class="block text-sm font-medium leading-6 text-gray-900">Last name</label>
          <div class="mt-2">
            <input type="text" name="last-name" id="last-name" autocomplete="family-name"
              placeholder="Enter your last name" required formControlName="lastName"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm leading-6"
              [class]="{
                'focus:ring-indigo-600': !shouldShowError(lastName),
                'focus:ring-red-500': shouldShowError(lastName),
              }">
            <div *ngIf="lastName?.getError('serverError')" class="text-red-600 text-sm mt-1">
              {{ lastName?.getError('serverError') }}
            </div>
          </div>
          @if (shouldShowError(lastName) && lastName?.hasError('required')) {
          <span class="text-sm text-red-500">Last name is required</span>
          }
        </div>

        <!-- Username field -->
        <div class="sm:col-span-6">
          <label for="username" class="block text-sm font-medium leading-6 text-gray-900">Username</label>
          <div class="mt-2">
            <input type="text" name="username" id="username" autocomplete="family-name" placeholder="Enter a username"
              required formControlName="username"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm leading-6"
              [class]="{
                'focus:ring-indigo-600': !shouldShowError(username),
                'focus:ring-red-500': shouldShowError(username),
              }">
            <div *ngIf="username?.getError('serverError')" class="text-red-600 text-sm mt-1">
              {{ username?.getError('serverError') }}
            </div>
          </div>
          @if (shouldShowError(username) && username?.hasError('required')) {
          <span class="text-sm text-red-500">Username is required</span>
          }
        </div>

        <!-- Email field -->
        <div class="sm:col-span-6">
          <label for="email" class="block text-sm font-medium leading-6 text-gray-900">Email address</label>
          <div class="mt-2">
            <input id="email" name="email" type="email" autocomplete="email" placeholder="Enter your Email" required
              formControlName="email"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"
              [class]="{
                'focus:ring-indigo-600': !shouldShowError(email),
                'focus:ring-red-500': shouldShowError(email),
              }">
            <div *ngIf="email?.getError('serverError')" class="text-red-600 text-sm mt-1">
              {{ email?.getError('serverError') }}
            </div>
          </div>
          @if (shouldShowError(email)) {
          @if (email?.hasError('required')) {
          <span class="text-sm text-red-500">Email is required</span>
          } @else if (email?.hasError('email')) {
          <span class="text-sm text-red-500">Email invalid</span>
          }
          }
        </div>

        <!-- Password field -->
        <div class="sm:col-span-6">
          <label for="password" class="block text-sm font-medium leading-6 text-gray-900">Password</label>
          <div class="mt-2">
            <input id="password" name="password" type="password" autocomplete="new-password"
              placeholder="Enter a password" required formControlName="password"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"
              [class]="{
                'focus:ring-indigo-600': !shouldShowError(password),
                'focus:ring-red-500': shouldShowError(password),
              }">
            <div *ngIf="password?.getError('serverError')" class="text-red-600 text-sm mt-1">
              {{ password?.getError('serverError') }}
            </div>
          </div>
          @if (shouldShowError(password)) {
          @if (password?.hasError('required')) {
          <span class="text-sm text-red-500">Password is required</span>
          } @else if (password?.hasError('minlength')) {
          <span class="text-sm text-red-500">Password must be at least 8 characters long</span>
          }
          }
        </div>

        <!-- Confirm Password field -->
        <div class="sm:col-span-6">
          <label for="confirm-password" class="block text-sm font-medium leading-6 text-gray-900">Confirm
            Password</label>
          <div class="mt-2">
            <input id="confirm-password" name="confirm-password" type="password" autocomplete="new-password"
              placeholder="Confirm your password" required formControlName="confirmPassword"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"
              [class]="{
                'focus:ring-indigo-600': !shouldShowError(confirmPassword),
                'focus:ring-red-500': shouldShowError(confirmPassword),
              }">
            <div *ngIf="confirmPassword?.getError('serverError')" class="text-red-600 text-sm mt-1">
              {{ confirmPassword?.getError('serverError') }}
            </div>
          </div>
          @if (shouldShowError(confirmPassword)) {
          @if (confirmPassword?.hasError('matchesField') || confirmPassword?.hasError('required')) {
          <span class="text-sm text-red-500">Confirm password must match password</span>
          }
          }
        </div>
      </div>

      <!-- Submit button -->
      <div>
        <button type="submit"
          class="flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Sign
          up</button>
      </div>
    </form>
  </div>
</div>